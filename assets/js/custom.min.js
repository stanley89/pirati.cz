function formatNumber(e,t){var a="";if(null!=e){a=e.toString(),blockCount=Math.floor((a.length-1)/3);for(var n=0;n<blockCount;n++)a=a.slice(0,a.length-3*(n+1)-n)+" "+a.slice(a.length-3*(n+1)-n);0!=e&&null!=t?a=t+a+",-":a+=",-"}return a}function formatPercent(e){var t="";return null!=e&&((t=Math.abs(e).toString()).replace(".",","),t=(e>0?"-":"+")+t+" %"),t}function calculate(){var e=$("#dane-akt-hruba-in"),t=$("#dane-akt-deti"),a=$("#dane-akt-student"),n=$("#dane-akt-superhruba"),o=$("#dane-akt-socialni"),r=$("#dane-akt-zdravotni"),i=$("#dane-akt-hruba"),c=$("#dane-akt-socialni-obc"),l=$("#dane-akt-zdravotni-obc"),s=$("#dane-akt-dan"),u=$("#dane-akt-solidarni"),d=$("#dane-akt-slevy"),h=$("#dane-akt-bonus"),f=$("#dane-akt-cista"),p=$("#dane-akt-efektivni"),m=$("#dane-pir-hruba"),v=$("#dane-pir-dan"),g=$("#dane-pir-slevy"),b=$("#dane-pir-bonus"),k=$("#dane-pir-cista"),x=$("#dane-pir-efektivni"),_=$("#dane-rozdil"),w=e.val(),C=t.val();null==C&&(C=0);var N=a.is(":checked");if(null!=w&&w>=11e3){w=Math.ceil(w),C=Math.ceil(C);var y=Math.ceil(.25*w);y>28232&&(y=28232);var M=Math.ceil(.09*w),E=w+y+M,z=0,T=w;T>112928&&(T=112928,z=Math.ceil(.07*(w-112928)));var j=Math.ceil(.065*T),B=Math.ceil(.045*w),I=100*Math.ceil(E/100),q=Math.ceil(.15*I),P=2070;N&&(P+=335);var S=q-P;S<0&&(S=0);for(var A=0,R=0;R<C;R++)A+=0==R?1117:1==R?1617:2017;var U=w-j-B-(S-=A)-z,F=Math.ceil(1e4*(1-U/E))/100,H=Math.ceil(.47*E),L=H-P;L<0&&(L=0);var O=E-(L-=A),Q=Math.ceil(1e4*(1-O/E))/100,D=O-U;n.text(formatNumber(E)),o.text(formatNumber(y,"+")),r.text(formatNumber(M,"+")),i.text(formatNumber(w,"")),c.text(formatNumber(j,"-")),l.text(formatNumber(B,"-")),s.text(formatNumber(q,"-")),u.text(formatNumber(z,"-")),d.text(formatNumber(P,"+")),h.text(formatNumber(A,"+")),f.text(formatNumber(U)),p.text(formatPercent(F)),m.text(formatNumber(E)),v.text(formatNumber(H,"-")),g.text(formatNumber(P,"+")),b.text(formatNumber(A,"+")),k.text(formatNumber(O)),x.text(formatPercent(Q)),_.text(formatNumber(D,D>0?"+":"")),D>=0?(_.hasClass("dane-result-minus")&&_.removeClass("dane-result-minus"),_.hasClass("dane-result-plus")||_.addClass("dane-result-plus")):(_.hasClass("dane-result-minus")||_.addClass("dane-result-minus"),_.hasClass("dane-result-plus")&&_.removeClass("dane-result-plus"))}else n.text(""),o.text(""),r.text(""),i.text(""),c.text(""),l.text(""),s.text(""),u.text(""),d.text(""),h.text(""),f.text(""),p.text(""),m.text(""),v.text(""),g.text(""),b.text(""),k.text(""),x.text(""),_.text("")}function calculateClick(){var e=$("#dane-akt-hruba-in").val();null!=e&&e>=11e3?($("#div-calculator").removeClass("hidden-start"),$("#div-calculator-info").removeClass("hidden-start"),$("#div-calculator-text").removeClass("hidden-start"),$("#div-chcete-vedet-vic").removeClass("hidden-start"),calculate(),$("html, body").animate({scrollTop:$("#div-calculator").offset().top},500)):$("#dane-error-in").removeClass("hidden")}Foundation.Interchange.SPECIAL_QUERIES["medium down"]="screen and (max-width: 63.9375em)",$(document).foundation(),$(document).on("replaced.zf.interchange",function(e){$(this).foundation()}),$("button[data-toggle]").on("click",function(){$(this).parent().hasClass("js-button-toggled")?$(this).parent().removeClass("js-button-toggled"):$(this).parent().addClass("js-button-toggled")}),window.onload=function(){};var choice_n_random=function(e,t){t=void 0!==t?t:3;for(var a=[];;){var n=e[Math.floor(Math.random()*e.length)];if(n.description&&(a.push(n),a.length==t))break}return a},choice_person=function(e,t,a){a=void 0!==a?a:null;var n=null;return $.each(e,function(e,o){if(o.uid==t)return n=o,void(n.role=a)}),n?[n]:[{name:t,role:a}]},choice_garant=function(e){return choice_person(e,page_garant,"garant")},choice_leader=function(e){return choice_person(e,page_leader,"vedoucí týmu")},choice_contact=function(e){return choice_person(e,page_contact,"kontaktní osoba")},show_people=function(e,t,a){a.length&&(choice=t(e),$.get(snippet_profile,function(e){var e=Handlebars.compile(e);$.each(choice,function(t,n){var o=e(n);$(a).append(o)})},"html"))},search=function(e){$("#searchsub").click(function(){var e="https://www.google.cz/?q=inurl:pirati.cz+"+search.val();window.location.href=e}),$("#search").autocomplete({source:e,select:function(e,t){window.location.href=t.item.value}})},back_top=function(){$(window).scroll(function(){$(this).scrollTop()>50?$(".scrolltop:hidden").stop(!0,!0).fadeIn():$(".scrolltop").stop(!0,!0).fadeOut()}),$(function(){$(".scroll").click(function(){return $("html,body").animate({scrollTop:$(".thetop").offset().top},"1000"),!1})})},show_relatives=function(e){var t=$("#relatives");if(t.length){var a=e[0];post_tags.length||$("#relatives-box").hide(),$.each(page_tags,function(e,n){$.each(a[n],function(e,a){var n=$("<li/>").appendTo(t);$("<a/>").text(a.title).attr("href",a.url).appendTo(n)})})}},makemap=function(e){var t=e[0].settings;$(t.id).width(t.size.width),$(t.id).height(t.size.height);var a=Raphael(t.id,t.size.width,t.size.height);$("#region-description>div").hide();var n=0,o=$("#regions-list"),r=$("#regions-list-2"),i=e[0].regions;$.each(i,function(e,i){if(n<7){var c=$("<li/>").appendTo(o);$("<a/>").text(i.name).attr("href",i.url).appendTo(c)}else{var l=$("<li/>").appendTo(r);$("<a/>").text(i.name).attr("href",i.url).appendTo(l)}n++;var s={title:i.name},u=$.extend(t.region_attrs,s);t.colors?i.color=Raphael.getColor():i.color="#666";i.id;$.each(i.paths,function(e,n){var o=function(){window.open(i.url)},r=function(){window.open(i.url)},c=function(){n.animate({fill:i.color},500).attr({cursor:"pointer"})},l=function(){n.animate({fill:"#333"},500)};(n=a.path(n).scale(t.size.scale,t.size.scale,0,0).attr(u))[0].onclick=o,n[0].ondblclick=r,n[0].onmouseover=c,n[0].onmouseout=l})})};$(function(){$.get(api_search).done(search).fail(function(e){console.log("Error in search:",e)}),back_top(),$.get(api_people).done(function(e){show_people(e,choice_n_random,$("#people")),show_people(e,choice_garant,$("#garant")),show_people(e,choice_leader,$("#leader")),show_people(e,choice_contact,$("#contact"))}).fail(function(e){console.log("Error in relatives articles:",e)}),$("#relatives").length&&$.get(api_tags).done(function(e){show_relatives(e)}).fail(function(e){console.log("Error in relatives articles:",e)}),$("#regions-map").length&&$.get(api_regions).done(function(e){makemap(e)}).fail(function(e){console.log("Error: map")})}),$().ready(function(){$("#dane-button-calculate").on("click",calculateClick),$("#dane-akt-hruba-in").on("keyup",calculate).on("change",calculate),$("#dane-akt-deti").on("keyup",calculate).on("change",calculate),$("#dane-akt-student").on("change",calculate),$("#dane-akt-hruba-in").on("focus",function(){$(this).hasClass("hidden")||$("#dane-error-in").addClass("hidden")})});var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-34662053-2"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),window.twttr=function(e,t,a){var n,o=e.getElementsByTagName(t)[0],r=window.twttr||{};return e.getElementById(a)?r:(n=e.createElement(t),n.id=a,n.src="https://platform.twitter.com/widgets.js",o.parentNode.insertBefore(n,o),r._e=[],r.ready=function(e){r._e.push(e)},r)}(document,"script","twitter-wjs"),window.fbAsyncInit=function(){FB.init({appId:"1526197851008996",xfbml:!0,version:"v2.5"})},function(e,t,a){var n,o=e.getElementsByTagName(t)[0];e.getElementById(a)||((n=e.createElement(t)).id=a,n.src="//connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(n,o))}(document,"script","facebook-jssdk");